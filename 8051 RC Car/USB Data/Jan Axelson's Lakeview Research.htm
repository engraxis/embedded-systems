<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0029)http://www.lvr.com/usbfaq.htm -->
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/lvr.dwt" codeOutsideHTMLIsLocked="false" --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="http://www.lvr.com/favicon.ico">


<meta name="Author" content="Jan Axelson">
<meta name="GENERATOR" content="">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jan Axelson's Lakeview Research</title>
<!-- InstanceEndEditable -->
<script src="./Jan Axelson's Lakeview Research_files/SpryMenuBar.js" type="text/javascript"></script>
<link href="./Jan Axelson's Lakeview Research_files/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css">
<link href="http://www.lvr.com/styles/lvr.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" -->

<meta http-equiv="Description" content="Information and tools relating to design and programming FOR THE UNIVERSAL SERIAL BUS (USB)..">
<meta http-equiv="Keywords" content="USB, UNIVERSAL SERIAL BUS, HID, HUMAN INTERFACE DEVICE, CYPRESS SEMICONDUCTOR, CY763000, DIRECTX, DIRECT INPUT">
<meta name="Author" content="Jan Axelson">
<meta name="GENERATOR" content="">


<link rel="stylesheet" href="http://www.lvr.com/styles/lvr.css" type="text/css">

<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="fancyzoom" -->

<script src="http://www.lvr.com/js-global/FancyZoom.js" type="text/javascript"></script>
<script src="http://www.lvr.com/js-global/FancyZoomHTML.js" type="text/javascript"></script>

<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="partnerlinks" -->
<script src="http://lvr.com/html/partnerlinks.js"></script>
<!-- InstanceEndEditable -->

<script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/document_iterator.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/find_proxy.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/get_html_text.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/global_constants.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/name_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/number_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/string_finder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/change_sink.js"></script><meta name="document_iterator.js"><meta name="find_proxy.js"><meta name="get_html_text.js"><meta name="global_constants.js"><meta name="name_injection_builder.js"><meta name="number_injection_builder.js"><meta name="string_finder.js"><meta name="change_sink.js"><style id="wrc-middle-css" type="text/css">.wrc_whole_window{	display: none;	position: fixed; 	z-index: 2147483647;	background-color: rgba(40, 40, 40, 0.9);	word-spacing: normal;	margin: 0px;	padding: 0px;	border: 0px;	left: 0px;	top: 0px;	width: 100%;	height: 100%;	line-height: normal;	letter-spacing: normal;}.wrc_middle_main {	font-family: Segoe UI, Arial Unicode MS, Arial, Sans-Serif;	font-size: 14px;	width: 600px;	height: auto;	margin: 0px auto;	margin-top: 15%;    background: url(chrome-extension://icmlaeflemplmjndnaapfdbbnpncnbda/skin/images/background-body.jpg) repeat-x left top;	background-color: rgb(39, 53, 62);}.wrc_middle_logo {    background: url(chrome-extension://icmlaeflemplmjndnaapfdbbnpncnbda/skin/images/logo.jpg) no-repeat left bottom;    width: 140px;    height: 42px;    color: orange;    display: table-cell;    text-align: right;    vertical-align: middle;}.wrc_icon_warning {	margin: 20px 10px 20px 15px;	float: left;	background-color: transparent;}.wrc_middle_title {    color: #b6bec7;	height: auto;    margin: 0px auto;	font-size: 2.2em;	white-space: nowrap;	text-align: center;}.wrc_middle_hline {    height: 2px;	width: 100%;    display: block;}.wrc_middle_description {	text-align: center;	margin: 15px;	font-size: 1.4em;	padding: 20px;	height: auto;	color: white;	min-height: 3.5em;}.wrc_middle_actions_main_div {	margin-bottom: 15px;	text-align: center;}.wrc_middle_actions_blue_button {	-moz-appearance: none;	border-radius: 7px;	-moz-border-radius: 7px/7px;	border-radius: 7px/7px;	background-color: rgb(0, 173, 223) !important;	display: inline-block;	width: auto;	cursor: Pointer;	border: 2px solid #00dddd;}.wrc_middle_actions_blue_button:hover {	background-color: rgb(0, 159, 212) !important;}.wrc_middle_actions_blue_button:active {	background-color: rgb(0, 146, 200) !important;	border: 2px solid #00aaaa;}.wrc_middle_actions_blue_button div {	display: inline-block;	width: auto;	cursor: Pointer;	margin: 3px 10px 3px 10px;	color: white;	font-size: 1.2em;	font-weight: bold;}.wrc_middle_action_low {	font-size: 0.9em;	white-space: nowrap;	cursor: Pointer;	color: grey !important;	margin: 10px 10px 0px 10px;	text-decoration: none;}.wrc_middle_action_low:hover {	color: #aa4400 !important;}.wrc_middle_actions_rest_div {	padding-top: 5px;	white-space: nowrap;	text-align: center;}.wrc_middle_action {	white-space: nowrap;	cursor: Pointer;	color: red !important;	font-size: 1.2em;	margin: 10px 10px 0px 10px;	text-decoration: none;}.wrc_middle_action:hover {	color: #aa4400 !important;}</style><script id="wrc-script-middle_window" type="text/javascript" language="JavaScript">var g_inputsCnt = 0;var g_InputThis = new Array(null, null, null, null);var g_alerted = false;/* we test the input if it includes 4 digits   (input is a part of 4 inputs for filling the credit-card number)*/function is4DigitsCardNumber(val){	var regExp = new RegExp('[0-9]{4}');	return (val.length == 4 && val.search(regExp) == 0);}/* testing the whole credit-card number 19 digits devided by three '-' symbols or   exactly 16 digits without any dividers*/function isCreditCardNumber(val){	if(val.length == 19)	{		var regExp = new RegExp('[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{4}');		return (val.search(regExp) == 0);	}	else if(val.length == 16)	{		var regExp = new RegExp('[0-9]{4}[0-9]{4}[0-9]{4}[0-9]{4}');		return (val.search(regExp) == 0);	}	return false;}function CheckInputOnCreditNumber(self){	if(g_alerted)		return false;	var value = self.value;	if(self.type == 'text')	{		if(is4DigitsCardNumber(value))		{			var cont = true;			for(i = 0; i < g_inputsCnt; i++)				if(g_InputThis[i] == self)					cont = false;			if(cont && g_inputsCnt < 4)			{				g_InputThis[g_inputsCnt] = self;				g_inputsCnt++;			}		}		g_alerted = (g_inputsCnt == 4);		if(g_alerted)			g_inputsCnt = 0;		else			g_alerted = isCreditCardNumber(value);	}	return g_alerted;}function CheckInputOnPassword(self){	if(g_alerted)		return false;	var value = self.value;	if(self.type == 'password')	{		g_alerted = (value.length > 0);	}	return g_alerted;}function onInputBlur(self, bRatingOk, bFishingSite){	var bCreditNumber = CheckInputOnCreditNumber(self);	var bPassword = CheckInputOnPassword(self);	if((!bRatingOk || bFishingSite == 1) && (bCreditNumber || bPassword) )	{		var warnDiv = document.getElementById("wrcinputdiv");		if(warnDiv)		{			/* show the warning div in the middle of the screen */			warnDiv.style.left = "0px";			warnDiv.style.top = "0px";			warnDiv.style.width = "100%";			warnDiv.style.height = "100%";			document.getElementById("wrc_warn_fs").style.display = 'none';			document.getElementById("wrc_warn_cn").style.display = 'none';			if(bFishingSite)				document.getElementById("wrc_warn_fs").style.display = 'block';			else				document.getElementById("wrc_warn_cn").style.display = 'block';			warnDiv.style.display = 'block';		}	}}</script></head><link id="apn-null-stylesheet" rel="stylesheet" href="chrome-extension://aaaaoggiphohkihibdkcnhnokmkfmhnj/config/skin/css/containers.css"><iframe id="apn-null-toolbar" src="./Jan Axelson's Lakeview Research_files/toolbar.htm" class="apn-toolbar SkipThisFixedPosition" style="top: 0px;"></iframe>



<body onload="setupZoom()">


<div id="container_all">

<div id="container_header">

<div id="title">

<a href="http://www.lvr.com/index.html"><img src="./Jan Axelson's Lakeview Research_files/lvr_logo.jpg" alt="Jan Axelson&#39;s Lakeview Research" width="346" height="64" hspace="1" vspace="0" border="0"></a>

</div> <!-- title -->

<div id="search">

<form class="float_right" method="get" action="http://www.google.com/search">

<!--<div style="border:none;padding:4px; float:right;">-->
<table border="0" cellpadding="5">
<tbody><tr align="right">

<td>
<input type="text" name="q" size="30" maxlength="127" value="">
<input type="submit" value="Google Search">
</td>
</tr>
 
<tr align="right" style="font-size:90%">
<td>
<input type="checkbox" name="sitesearch" value="Lvr.com" checked="checked"> 
 search this site only
 </td>
</tr>
</tbody></table>
</form>  

</div> <!-- search -->

<div id="menubar_utilities">

<ul id="MenuBar1" class="MenuBarHorizontal">
  <li><a href="http://www.lvr.com/index.html">Home</a></li>
   <li><a href="http://www.lvr.com/quicklinks.htm">Site Map</a></li>
   <li><a href="http://www.lvr.com/ordering.htm" class="">Buy Books</a> </li>
  <li class="last"><a href="http://www.lvr.com/about_lakeview_research.htm" class="">About Lakeview Research</a> </li>
</ul>

</div> <!-- menubar_utilities -->

<div id="menubar_main">
         
<ul id="MenuBar3" class="MenuBarHorizontal">
  <li class="background"><a href="http://www.lvr.com/usb.htm" class="MenuBarItemSubmenu">USB&nbsp; </a>
    <ul>
      <li class="background"><a href="http://www.lvr.com/usb.htm">USB Main Page</a></li>
               
      <li class="background"><a href="http://www.lvr.com/usbchips.htm">Chips</a></li>      
      <li><a href="http://www.lvr.com/development_tools.htm">Development Tools</a></li>
      <li><a href="http://www.lvr.com/usbcode.htm">Device Code</a></li>
      <li><a href="http://www.lvr.com/usb_device_hardware.htm">Device Hardware</a></li>
      <li><a href="http://www.lvr.com/embedded_host.htm">Embedded Host &amp; OTG</a></li>
      <li><a href="http://www.lvr.com/usb_host_software.htm">Host Software</a></li>
      <li><a href="http://www.lvr.com/hidpage.htm">Human Interface Devices</a></li>
      <li><a href="http://www.lvr.com/mass_storage.htm">Mass Storage</a></li>
      <li><a href="http://www.lvr.com/winusb.htm">WinUSB</a></li>           
    </ul>
  </li>
  
  <li><a href="http://www.lvr.com/serport.htm" class="">Serial Ports</a> </li>
   <li><a href="http://www.lvr.com/mass_storage.htm">Mass Storage</a></li>
   <li><a href="http://www.lvr.com/ethernet.htm">Ethernet</a></li>
   <li><a href="http://www.lvr.com/parport.htm">Parallel Port</a></li>
   <li><a href="http://www.lvr.com/forum/index.php">PORTS Forum</a></li>
   <li class="last"><a href="http://www.lvr.com/sitemap.htm" class="MenuBarItemSubmenu">More&nbsp; </a>
     <ul>
       <li><a href="http://www.lvr.com/microc.htm">8052-Basic</a></li>
       <li><a href="http://www.lvr.com/pcbs.htm">Printed Circuit Boards</a></li>
       <li><a href="http://www.lvr.com/articles.htm">Articles</a></li>
       <li><a href="http://www.lvr.com/press.htm">News Releases</a></li>
      
     </ul>
 
</li></ul>


</div> <!-- menubar_main -->

</div> <!-- header -->



<div id="container_main">
  <div id="content">
<!-- InstanceBeginEditable name="Content" -->



  
<p><a href="http://www.lvr.com/index.html">Home</a> &gt; <a href="http://www.lvr.com/usb.htm">USB Central</a>   &gt; USB Developer's FAQ</p>
      <h1>USB Developers FAQ</h1>
      <blockquote>
        <h4>Also see:</h4>
        <p><a href="http://www.lvr.com/usb3faq.htm"></a><a href="http://www.lvr.com/hidfaq.htm">HID 
          FAQ</a> | <a href="http://www.lvr.com/mass_storage_faq.htm">Mass Storage FAQ</a> | <a href="http://www.lvr.com/usb3faq.htm">USB 3.0 Developers FAQ</a></p>
      </blockquote>
<h2 align="left">Basics</h2>
      <blockquote>
        <p align="left"><strong>How can I read or write to a USB port on a PC?</strong></p>
        <p align="left">Applications don't access ports; they can only access a 
          specific device attached to a port.</p>
        <p align="left">A USB port is very different from a PC's parallel or serial 
          port. Each parallel and serial port has a series of port addresses that 
          are unique to that port. With an appropriate driver, an application can 
          read and write to these port addresses. </p>
        <p align="left">A USB port is a port on a shared bus. The ports do not have 
          unique port addresses as parallel and serial ports do. Traffic sent to 
          a single device may appear at multiple ports. When a device attaches 
          to a USB port, the operating system requests information from the device 
          and assigns a bus address and a class driver or device driver that applications 
          can use to communicate with the device. Lower-level drivers provided by 
          the operating system manage the details of communicating on the bus. </p>
        <p align="left"><strong>How do I access USB devices from Windows applications?</strong></p>
        <p align="left">How an application communicates with a USB device depends 
          on the device driver that Windows has assigned to the device. The choice of driver  in 
          turn depends on finding a match between the information in the descriptors 
          that Windows retrieves on device attachment or bootup and the information 
          stored in the PC's INF files. Typically, the application doesn't have 
          to know whether the device uses USB or another interface. For example, 
          applications access files on a drive in the same way whether the drive 
          uses USB, IEEE-1394, SCSI, ATAPI, or another interface. The interface-specific 
          details are handled at a lower level. Some devices use drivers included 
          with Windows. Others use a vendor-specific driver that he user must install.</p>
        <p align="left"><strong>What device driver should my device use?</strong> 
        </p>
        <p align="left">The easiest approach is to use a driver supported by the 
          operating systems of the computers your device will attach to. To do so,  your device must fit the requirements and limitations of the 
          driver. For vendor-specific device types that exchange data at low to 
          moderate rates, one option is the HID class, which supports control and 
          interrupt transfers. For 
          transferring large amounts of data where speed isn't essential, use bulk transfers, possibly using mass-storage-class 
          drivers or a vendor-specific driver. </p>
        <p align="left"><strong>How can I connect two PCs via USB?</strong></p>
        <p align="left">Every USB communication is between a host and a device. 
          The USB support included in every PC is for a USB host. To connect two 
          PCs via USB, you can do any of the following:</p>
        <p align="left">1. Use  a USB bridge cable such as the<a href="http://www.usbgear.com/EZ101.html"> EZ-Link</a>. The bridge  
          contain two USB devices with a shared buffer. Each device connects to a different PC. On receiving data from a host, a device writes the data to the shared buffer, and the other device sends the data to its host. Bridges typically use a network driver and appear as a network connection 
          between the PCs.</p>
        <p align="left">2. Connect a USB/RS-232 adapter to each PC and connect the 
          RS-232 ports in a null-modem connection. Use COM-port functions to communicate.</p>
        <p align="left">3. Install a device card in one PC. An example is PLX Technology's 
          (formerly Netchip) <a href="http://www.plxtech.com/products/net2000/net2282#developmenttools">NET2283RDK 
            Adapter Card</a>. The PC provides the driver software for the device.</p>
        <p align="left">4. Some Windows CE PCs can function as either a host or device. </p>
        <p align="left"><strong>How can I connect my USB drive,  
          printer, keyboard, mouse, or other USB device  to my microcontroller 
          circuit?</strong></p>
        <p align="left">Every USB communication is between a host and a device. 
          Almost all microcontrollers with USB capability are devices. Peripherals 
          are also devices. To access a USB peripheral, the microcontroller circuit must contain  an <a href="http://www.lvr.com/embedded_host.htm">embedded 
            host controller</a>.</p>
      </blockquote>
      <h2 align="left">USB Versions</h2>
      <blockquote>
        <p align="left"><strong>Must all USB 2.0 devices be high speed?</strong> </p>
        <p align="left">No, a 2.0 device can be low, full, or high speed.</p>
        <p align="left"><strong>How can I make a USB 1.x device USB 2.0-compliant?</strong></p>
        <p align="left"> In the device descriptor, set bcdUSB to 0200h. The default 
          interface must request no isochronous bandwidth. A USB 2.0-compliant low-speed 
          cable must have the same inner shield and drain wire required for full 
          and high speed cables. </p>
      </blockquote>
      
        <blockquote>
          <p><strong>What is the difference between USB 1.0 and USB 
            1.1?</strong> </p>
        </blockquote>
      <blockquote>
        <p align="left">A major difference is that USB 1.1 adds interrupt OUT transfers. </p>
        <p align="left"><strong>How can I tell what speed a device is using?</strong></p>
        <p align="left">Normally applications have no need to know device speed. 
          However, there are some indicators. If a bulk endpoint's wMaxPacketSize 
          is 512, the device is using high speed. Otherwise, it's full speed. If 
          an interrupt endpoint has a wMaxPacketSize greater than 64, it's high speed. 
          If the value is between 9 and 64, it may be full or high speed. If the value is  8 or less, 
          it may be any speed. If an isochronous endpoint has a wMaxPacketSize of 
          1024, it's high speed. Otherwise, it may be full or high speed. If a device 
          has a bulk or isochronous endpoint, it's not low speed. A configuration 
          string may also contain speed information.</p>
        <p align="left"><strong>Why isn't the host polling my device's high-speed 
          interrupt endpoint at the correct rate?</strong></p>
        <p align="left">For low- and full-speed interrupt endpoints, the descriptor's 
          bInterval value indicates the requested maximum number of milliseconds 
          between transaction attempts. </p>
        <p align="left">For high-speed interrupt endpoints, the interval is calculated 
          differently. According to the USB 2.0 specification, bInterval must be between 
          1 and 16, the interval is in units of 125 microseconds, and the interval's 
          value equals 2^(bInterval-1) (with ^ indicating the exponent operator). 
          In other words, if bInterval = 4, the interval is 2^(4-1), or 2^3, or 
          eight 125-microsecond periods, which means that the device is requesting 
          a minimum of one poll per millisecond. </p>
        <p align="left">Reports are that some device providers are using full-speed 
          bInterval values in high-speed descriptors. Reports also say that under 
          Windows, a device may receive its intended polling rate (rather than its 
          requested polling rate) in spite of this error. Other operating systems 
          are likely to attempt to provide the requested polling rate, or may report 
          an illegal bInterval value.</p>
      </blockquote>
      <h2 align="left">Device Classes</h2>
      <blockquote>
        <p align="left"><strong>Where can I find the specifications for USB device 
          classes?</strong></p>
        <p align="left"><a href="http://www.usb.org/developers/devclass/">USB-IF 
          Device Class Documents</a></p>
        <p align="left"><strong>Which device classes does Windows support? </strong></p>
        <p align="left"><a href="http://www.lvr.com/usbwin.htm">USB Drivers 
          Included with Windows</a>.</p>
        <p align="left"><strong>What driver should I use for a a virtual COM port 
          (to access the device the same as an RS-232 serial device)?</strong></p>
        <p align="left">One option is to use Windows' Communications driver. The 
          firmware should define the device as CDC/ACM (Communications Device Class/Abstract 
          Control Model). The device uses endpoint zero and bulk IN and bulk OUT endpoints. 
          In the INF file, set Class=Ports. For Windows 2000 and Windows XP, describe 
          the hardware driver (usbser.sys) as a functional driver, not as a lower 
          filter driver. For Windows 98 and Windows Me, declare "usbser.sys,ccport.sys" 
          as the device drivers. </p>
        <p align="left">Reports are that the Windows driver is slow (640Kbit/sec) 
          and the WM_DEVICECHANGE notifications don't work properly on Windows 2000. 
          <a href="http://www.lvr.com/files/usbcomport.txt">More information</a>. </p>
        <p align="left">For better performance, use a <a href="http://www.lvr.com/serport.htm#usb_virtual_com_ports">dedicated-function controller</a> whose vendor provides 
          a virtual COM port driver.</p>
      </blockquote>
      <h2 align="left">Power</h2>
      <blockquote>
        <p align="left"><strong>Must a self-powered device have a connection to 
          the VBUS line in the cable?</strong></p>
        <p align="left">Yes. The device must switch in the pull up on D- or D+ only 
          when VBUS is present. See section 7.2.1 in the USB 2.0 specification.</p>
      </blockquote>
      <h2 align="left">Hosts</h2>
      <blockquote>
        <p align="left"><strong>Why does my device work with UHCI hosts but not 
          OHCI hosts?</strong></p>
        <p align="left"> OHCI hosts may do multiple stages of a control transfer 
          in a single frame, while UCHI hosts do each stage in a different frame. 
          Every USB device should function under both host types.</p>
        <p><strong>Why doesn't my high-speed, high-bandwidth device transfer data 
          at the requested rate?</strong></p>
        <p>Windows XP's EHCI driver doesn't support high-bandwidth interrupt transfers 
          (transfers with more than one packet per microframe). Windows does support 
          high-bandwidth isochronous transfers.        </p>
      </blockquote>
      <h2 align="left">Devices on the Bus</h2>
      <blockquote>
        <p align="left"><strong>How can my application detect when my device is 
          attached or removed?</strong></p>
        <p align="left">To find out when a device has been attached or removed, 
          catch the WM_DEVICECHANGE messege with the parameter DBT_DEVNODES_CHANGED. 
          Then use SetupDi_ functions to find out what device was attached or removed. 
          A Usenet post on the subject is <a href="http://groups.google.com/groups?hl=en&lr=lang_en&ie=UTF-8&oe=UTF-8&selm=OeAq%248alCHA.1928%40tkmsftngp07">USB 
            Device Insertion/Removal Event Notification</a>. Also see my <a href="http://lvr.com/hidpage.htm#MyExampleCode">example 
              code</a>.</p>
        <p align="left"><strong>How can my application reset, disable, or restart 
          a USB device?</strong></p>
        <p align="left">The DevCon example in the <a href="http://www.microsoft.com/whdc/devtools/wdk/WDKpkg.mspx">WDK</a> is a command-line 
          utility that shows how to enable, disable, restart, update, remove and 
          query devices using the SetupAPI and CfgMgr32 API functions. </p>
        <p align="left"><strong>How can I determine which port my device is attached 
          to?</strong></p>
        <p align="left">Under Windows, every device has a unique driver key, also called the 
          software key. You can obtain the  key from a device using SetupDi 
          functions, and obtain the same key from a hub port using undocumented 
          DeviceIoControl codes. When you have a match, you know which port the 
          device is attached to. </p>
        <p align="left">To retrieve the driver key name for a device, call SetupDiGetClassDevs 
          and SetupDiEnumDeviceInfo, then use SetupDiGetDeviceRegistryPropertyA 
          with Property set to SPDRP_DRIVER.</p>
        <p align="left">To retrieve the driver key name for a hub port, first find 
          the hubs with SetupDi_ functions and GUID_DEVINTERFACE_USB_HUB. </p>
        <p align="left">Obtain a handle to a hub with CreateFile. </p>
        <p align="left">Get the number of ports on the hub with IOCTL_USB_GET_NODE_INFORMATION 
          (undocumented IO control code in usbioctl.h). </p>
        <p align="left">Find out if a device is attached to a port with IOCTL_USB_GET_NODE_CONNECTION_INFORMATION_EX. 
        </p>
        <p align="left">For each attached device, get the driver key name with IOCTL_USB_GET_NODE_CONNECTION_DRIVERKEY_NAME 
          (undocumented IO control code in usbioctl.h).</p>
        <p><strong>I have two or more identical devices attached to a host. How 
          can I tell which is which?</strong></p>
        <p>Store a serial number in the device descriptor or use another vendor-specific 
          identifier. For HID-class devices, applications can read the serial number with the HidD_GetSerialNumberString function. </p>
        <p><strong>I've made changes to my device's firmware but Windows doesn't seem 
          to recognize the changes.</strong></p>
        <p>With the device attached, remove the device in Windows Device Manager. Then 
          detach and reattach the device.</p>
        <p><strong>Is there a limit to the maximum size of a transfer?</strong></p>
        <p>See <a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;832430">Maximum 
          size of USB transfers on various operating systems</a> (Microsoft Knowledge 
          Base Article 832430).</p>
        <p>These values are the maximum amount of data a WDM driver can request 
          to send or receive in a single USB Request Block (URB). An application 
          may request to send or receive more or less than this amount. The driver 
          can handle larger amounts by using multiple URBs. A specific device may have 
          stricter limits on transfer size.</p>
        <p><strong>During device testing, we attach many devices that are identical 
          except for the serial numbers. How can I prevent Windows from asking to 
          install a new driver every time a device is attached?</strong></p>
        <p>The method described below causes Windows 2000 and XP to ignore a device's serial number. 
          It's recommended for test environments only.</p>
        <p>This registry key controls whether Windows uses or ignores device serial 
          numbers:</p>
        <p>[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\UsbFlags]        </p>
        <p>It's possible to ignore all serial numbers, though this approach is NOT 
          recommended. To ignore all serial numbers, in the above key, change this 
          value to zero:</p>
        <p>GlobalDisableSerNumGen = 1</p>
        <p>To ignore the serial number for an individual device, create an entry 
          under the above ...\UsbFlags key. The name must start with "IgnoreHWSerNum" followed by the vendor and product 
          ID of the device. A value of 1 = "disable the serial number."</p>
        <p>Example (Vendor ID = 0925h, Product ID = 016Ah):</p>
        <p>IgnoreHWSerNum0925016A= 1</p>
        <p>(Thanks to Dieter Fauth for this answer.)</p>
        <p><strong>How is the USB data CRC value calculated?</strong></p>
        <p>Here are two examples.</p>
        <p><a href="http://www.lvr.com/files/usb_crc.c">Example 1</a> from Ron Hemphill.</p>
        <p>Example 2 from Barry Twycross:</p>
        <p>This is not suitable for use as production code; it is 
          very inefficient: </p>
        <pre><font face="Courier New, Courier, mono">UInt16 CRC16(void *buffer, UInt32 count) </font></pre>
        <pre><font face="Courier New, Courier, mono">{ </font></pre>
        <pre><font face="Courier New, Courier, mono">    UInt8 *bp; </font></pre>
        <pre><font face="Courier New, Courier, mono">    UInt32 poly, a, b, newBit, lostBit; int i; </font></pre>
        <pre><font face="Courier New, Courier, mono">    poly = 0x8005; </font></pre>
        <pre><font face="Courier New, Courier, mono">    a = 0xffff; </font></pre>
        <pre><font face="Courier New, Courier, mono">    bp = buffer; </font></pre>
        <pre><font face="Courier New, Courier, mono">    while(count--) </font></pre>
        <pre><font face="Courier New, Courier, mono">    { </font></pre>
        <pre><font face="Courier New, Courier, mono">        b = *(bp++); </font></pre>
        <pre><font face="Courier New, Courier, mono">        for(i = 0; i&lt;8; i++) </font></pre>
        <pre><font face="Courier New, Courier, mono">        { </font></pre>
        <pre><font face="Courier New, Courier, mono">            a &lt;&lt;= 1; </font></pre>
        <pre><font face="Courier New, Courier, mono">            newBit = (b &amp; 1); </font></pre>
        <pre><font face="Courier New, Courier, mono">            b &gt;&gt;= 1; </font></pre>
        <pre><font face="Courier New, Courier, mono">            lostBit = a &gt;&gt; 16; </font></pre>
        <pre><font face="Courier New, Courier, mono">            if(newBit != lostBit) </font></pre>
        <pre><font face="Courier New, Courier, mono">            { </font></pre>
        <pre><font face="Courier New, Courier, mono">                    a ^= poly; </font></pre>
        <pre><font face="Courier New, Courier, mono">            } </font></pre>
        <pre><font face="Courier New, Courier, mono">            a &amp;= 0xffff; </font></pre>
        <pre><font face="Courier New, Courier, mono">        } </font></pre>
        <pre><font face="Courier New, Courier, mono">    } </font></pre>
        <pre><font face="Courier New, Courier, mono">return(a^0xffff); </font>

}</pre>
      </blockquote>
      <!-- InstanceEndEditable -->
  </div> <!-- content -->
  
  <div id="rightside"><!-- #BeginLibraryItem "/Library/sponsored.lbi" --> <link rel="stylesheet" href="http://www.lvr.com/styles/lvr.css" type="text/css">
<p><strong>Partner Links</strong></p>


<script language="JavaScript" type="text/javascript">
partnerlinks(); 
</script>



<p></p><center>***</center>  <p></p>
  <script language="javascript">
  <!--
  var contact = "Ask about advertising on this site"
  var email = "jan"
  var emailHost = "Lvr.com" 
  document.write("<a href=" + "mail" + "to:" + email + "@" + emailHost+ ">" + contact + "</a>")
  //-->
  </script><a href="mailto:jan@Lvr.com">Ask about advertising on this site</a>  
<p></p>
<!-- #EndLibraryItem --><!-- #BeginLibraryItem "/Library/google.lbi" -->
<p>
<script type="text/javascript"><!--
google_ad_client = "pub-9614272375919933";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "000000";
google_color_bg = "F0F0F0";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>

<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</p>


<p>
<script type="text/javascript"><!--
google_ad_client = "pub-9614272375919933";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "000000";
google_color_bg = "F0F0F0";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>

<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</p><!-- #EndLibraryItem --></div>
  <!-- rightside -->
</div>
<!-- container_main -->
</div> 
<!-- container_all -->


<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar3 = new Spry.Widget.MenuBar("MenuBar3", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>


<!-- InstanceEnd -->
</body><style id="apn-body-style">html {    padding-top: 34px ! important;     border-top: 1px solid transparent; }</style><span id="skype_highlighting_settings" display="none" autoextractnumbers="1"></span><object id="skype_plugin_object" location.href="http://www.lvr.com/usbfaq.htm" location.hostname="www.lvr.com" style="position: absolute; visibility: hidden; left: -100px; top: -100px; " width="0" height="0" type="application/x-vnd.skype.click2call.chrome.5.7.0"></object></html>