C51 COMPILER V9.03   CODE                                                                  01/29/2013 13:15:18 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE CODE
OBJECT MODULE PLACED IN Code.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Code.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          ///////////////////////////////////////////////////////////////////////////
   2          #include <REGX51.H>
   3          #include <string.h>
   4          #define lcd P0
   5          sbit rs=P1^5;
   6          sbit rw=P1^6;
   7          sbit en=P1^7;
   8          sbit lcdbusy=P0^7;
   9          ////////////////////////// LCD DISPLAY FUNCTIONS //////////////////////////
  10          void lcdcmd(unsigned char);
  11          void lcddata(unsigned char);
  12          void lcdready(void);
  13          void delay(unsigned int);
  14          //////////////////////////////// VARIABLES ///////////////////////////////
  15          unsigned char a,b,i,k,p;                                                // Looping
  16          ///////////////////////////// MAIN FUNCTION //////////////////////////////
  17          void main(void)
  18          {               
  19   1      /*      P0=P1=P2=P3=0x00;
  20   1              lcdcmd(0x38);
  21   1              lcdcmd(0x0C);
  22   1              lcdcmd(0x01);
  23   1              lcdcmd(0x06);
  24   1              lcdcmd(0x81);
  25   1              P3=0xFF;
  26   1              delay(200);
  27   1        */
  28   1              P3=0x01;
  29   1              TMOD=0x20;
  30   1              TH1=0XFA;
  31   1              SCON=0X50;
  32   1              TR1=1;
  33   1              TI=0;
  34   1              while(1)
  35   1              {
  36   2                      SBUF=0X31;
  37   2                      while(TI==0);
  38   2                      TI=0;
  39   2                      delay(10);
  40   2                      SBUF=0X32;
  41   2                      while(TI==0);
  42   2                      TI=0;
  43   2                      delay(10);
  44   2                      SBUF=0X33;
  45   2                      while(TI==0);
  46   2                      TI=0;
  47   2                      delay(10);
  48   2              }
  49   1      }
  50          /////////////////////////////////////////////////////////////////////////
  51          void lcdcmd(unsigned char value)
  52          {
  53   1              lcdready();
  54   1              lcd=value;
  55   1              rs=0;
C51 COMPILER V9.03   CODE                                                                  01/29/2013 13:15:18 PAGE 2   

  56   1              rw=0;
  57   1              en=1;
  58   1              delay(50);
  59   1              en=0;
  60   1              return;
  61   1      }
  62          /////////////////////////////////////////////////////////////////////////
  63          void lcddata(unsigned char value)
  64          {
  65   1              lcdready();      
  66   1              lcd=value;
  67   1              rs=1;
  68   1              rw=0;
  69   1              en=1;
  70   1              delay(50);
  71   1              en=0;
  72   1              return;
  73   1      }
  74          /////////////////////////////////////////////////////////////////////////
  75          void lcdready(void)
  76          {
  77   1              lcdbusy=1;
  78   1              rs=0;
  79   1              rw=1;
  80   1              while(lcdbusy==1)
  81   1              {
  82   2                      en=0;
  83   2                      delay(50);
  84   2                      en=1;
  85   2              }       
  86   1              return;
  87   1      }
  88          /////////////////////////////////////////////////////////////////////////
  89          void delay(unsigned int z)
  90          {       
  91   1              for(b=1;b<z;b++)
  92   1              {
  93   2                      TMOD=0X01;
  94   2                      TH0=0XFC;
  95   2                      TL0=0X66;
  96   2                      TR0=1;
  97   2                      while(TF0==0);
  98   2                      TR0=0;
  99   2                      TF0=0;                  
 100   2              }       
 101   1              return;
 102   1      }
 103          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    156    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
